<!DOCTYPE html>
<html lang="en">
	<head>
		<!--Ensures that the browser interprets the characters in the
			document correctly and displays them as intended.-->
		<meta charset="UTF-8">
		<!-- ensures that the content is scaled properly to fit the
			screen size and is at its original size without any zooming. -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
        <link rel="stylesheet" href="/src/web/src/css/global.css">
        <link rel="stylesheet" href="/src/web/src/HomePage/index.css">
       
		<!-- Custom styles for weather icon -->
        <style>
            .weather-icon {
                font-size: 2em;
            }
        </style> 
        
        <!-- <link rel="utilities" href="/WebDev/utilities.css"> -->
        <title> WearCast</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
	</head>
	<body>
		<header>
        	<div class="navbar">
                <div class="navlogo">
                    <a href="index.html" class="logo"><img src="/src/web/assets/img/black_wearcast_logo.png" alt="WearCast logo"></a>
                </div>
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="../stylecast.html">StyleCast</a></li>
                        <li><a href="../about.html">About us</a></li>
                    </ul>
                </nav>
            </div>
    	</header>

    	<section id="current">
            <div class="weather">

                 <!-- Container for weather icon -->
            <div id="weather-icon"></div>

                <p1><span id="weekday">Day</span></p1>
                <p1>âš² <span id="location"> Fetching location... </span></p1>

                <div class="weather-data">
                    <p>Temperature: <span id="temperatureParagraph"> Fetching temperature data... </span></p>
                    <p>Humidity: <span id="humidityParagraph"> Fetching humidity data... </span></p>
                </div>
			</div>

			<div class="recommendation">
				<p id="clothingParagraph"> Based on the weather data,</p>
			</div>
        </section>

		<section id="info">
            <div class="hero">
                <p1>Feel Fabulous with WearCast!</p1>
                <p>We've all been there: staring at the closet, trying to figure out what to wear as the weather changes outside. It is a struggle to know if we will be too hot, too cold or just right. <br>Throw in factors like humidity and rain, and it is even trickier...</p>
                <p>That's where WearCast comes in - guiding you to get dressed for (<em>weather</em>) success!</p>
                <p>Let's dive in and slay! With our tool <a href="../stylecast.html"><strong>StyleCast</strong></a> you can browse through different styles based on different weather conditions to plan your styles in advance.</p>
                <button class="btn" onclick="location.href='../stylecast.html'"><span style="text-transform: uppercase;">Explore Styles</span></button>
            </div>
        </section>

		<section id="features">
            <div class="feature-description">
                <p>Innovative Features of WearCast</p>
            </div>
            <div class="feature-cards">
                <div class="card">
                    <h4>Real-time Weather Data</h4>
                    <p> We utilize sensors to recieve live updates on temperature and humidity data, ensuring that you're always prepared for the current weather.</p>
                </div>
                <div class="card">
                    <h4>Interactive Web Interface</h4>
                    <p>Access weather data and clothing recommendations through a user-friendly platform.</p>
                </div>
                <div class="card">
                    <h4>Personalized Clothing Recommendations</h4>
                    <p>Get outfit suggestions that perfectly match your chosen season using StyleCast.</p>
                </div>
            </div>
        </section>

		<footer>
            <div id="footerbar">
                <div class="footer-content">
                    <p>&copy; 2024 <strong>WearCast</strong> | All rights reserved.</p>
                    <a href="mailto:wearcast.dev@gmail.com"><img src="../../assets/img/email-icon.png" alt="Email" class="email-icon"></a>
                    <a href="http://instagram.com/wearcast"><img src="../../assets/img/instagram-icon.png" alt="Instagram" class="instagram-icon"></a>
                    <a href="https://git.chalmers.se/courses/dit113/2024/group-17/WearCast"><img src="../../assets/img/gitlab-icon.png" alt="GitLab" class="gitlab-icon"></a>
                </div>
            </div>
</footer>

		<!-- Include the script file -->
		<script src="index.js"></script>

        <!-- Weather API script -->
<script>
    // Function to call the weather API and update the weather icon
    const getWeather = async () => {
        try {
            const response = await fetch('https://api.openweathermap.org/data/2.5/weather?q=gothenburg,se&APPID=c95f90301395e8ce1cb18d910cd184cb');
            const data = await response.json();
            const weatherCondition = data.weather[0].id;
            const weatherIcon = getWeatherIcon(weatherCondition);
            document.getElementById('weather-icon').innerHTML = weatherIcon;
        } catch (error) {
            console.log(error);
        }
    };
    // Function to get the appropriate weather icon based on the weather condition code
    const getWeatherIcon = (weatherCondition) => {
        if (weatherCondition >= 200 && weatherCondition < 300) {
            return '<i class="wi wi-thunderstorm weather-icon"></i>'; // Thunderstorm
        } else if (weatherCondition >= 300 && weatherCondition < 400) {
            return '<i class="wi wi-rain weather-icon"></i>'; // Drizzle
        } else if (weatherCondition >= 500 && weatherCondition < 600) {
            return '<i class="wi wi-day-rain weather-icon"></i>'; // Rain
        } else if (weatherCondition >= 600 && weatherCondition < 700) {
            return '<i class="wi wi-day-snow weather-icon"></i>'; // Snow
        } else if (weatherCondition >= 700 && weatherCondition < 800) {
            return '<i class="wi wi-fog weather-icon"></i>'; // Atmosphere
        } else if (weatherCondition === 800) {
            return '<i class="wi wi-day-sunny weather-icon"></i>'; // Clear
        } else if (weatherCondition > 800) {
            return '<i class="wi wi-day-cloudy weather-icon"></i>'; // Clouds
        } else {
            return '';
        }
    };

    // Call the getWeather function to fetch weather data and display the icon
    getWeather();
    </script>
	</body>
</html>